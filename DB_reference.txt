SSH Commands:

GPDB:
ssh -L localhost:5434:usa-gpdb-webapi-db.cfkgfnkdhg4q.us-east-1.rds.amazonaws.com:5432 zac_whitney@13.220.233.31 -i /Users/zacwhitney/Documents/CS_Reporting/certs/aws_ed25519

HEDB (read replica):
ssh -L localhost:5434:usa-production-read-replica.cfkgfnkdhg4q.us-east-1.rds.amazonaws.com:5432 zac_whitney@13.220.233.31 -i /Users/zacwhitney/Documents/CS_Reporting/certs/aws_ed25519

HEDB (prod):
ssh -L localhost:5434:usa-production.cfkgfnkdhg4q.us-east-1.rds.amazonaws.com:5432 zac_whitney@13.220.233.31 -i /Users/zacwhitney/Documents/CS_Reporting/certs/aws_ed25519

analytics-events-data:
ssh -L localhost:3308:analytics-events-data.cfkgfnkdhg4q.us-east-1.rds.amazonaws.com:3306 zac_whitney@13.220.233.31 -i /Users/zacwhitney/Documents/CS_Reporting/certs/aws_ed25519


NOTE: I've updated the above to change the bastion IP from 3.90.60.8 to
54.89.102.98
NOTE (2025.05.21): Updated bastion IP again, from 54.89.102.98 to 13.220.233.31

Queries:

GPDB:
SELECT *
FROM recordings
WHERE organization_id = CUSTOMER_ORG_ID
  and deleted_at is null;

Find GPDB Org ID:
SELECT DISTINCT ON (signable_id) signable_id
FROM signatures
WHERE value LIKE '%intuit%'
  AND signable_type = 'Organization';

HEDB (all results):
SELECT *
FROM practiceobjects
         INNER JOIN
     customerkeys
     ON
         customerkeys.event_id = practiceobjects.event_id
WHERE customerkeys.user_id = (SELECT id FROM users WHERE email = 'rob@name-coach.com');

HEDB (unique results only):
SELECT DISTINCT ON (email) email
FROM practiceobjects
         INNER JOIN
     customerkeys
     ON
         customerkeys.event_id = practiceobjects.event_id
WHERE customerkeys.user_id = (SELECT id FROM users WHERE email = 'rob@name-coach.com');

analytics-events-data:
SELECT *
FROM analytics_events
WHERE customer_id LIKE '%lucasfilm.com%' and recording_id is not null;


Namebadges:

SELECT events.title AS "Event Title", events.created_at AS "Event Created At", events.date as "Event Date", users.email as "Customer Email"
FROM events
         INNER JOIN customerkeys on events.id = customerkeys.event_id
         INNER JOIN users on customerkeys.user_id = users.id
         LEFT OUTER JOIN lti_courses on events.id = lti_courses.event_id
         LEFT OUTER JOIN lti13_deployments on events.id = lti13_deployments.event_id
WHERE events.created_at > '2024-05-12'
  and lti_courses.event_id is null
  and lti13_deployments.event_id is null;

API call for Mixpanel events by customer id:

curl --request GET \
--url 'https://data.mixpanel.com/api/2.0/export?project_id=2928951&from_date=2021-01-01&to_date=2025-04-21&event=%5B%22common_play_pronunciation%22%5D&limit=1000&where=%28%22emerson.com%22%20in%20properties%5B%22id%22%5D%29' \
--header 'accept: text/plain' \
--header 'authorization: Basic c2VydmljZS1hY2N0LXphdy42YTc3YWUubXAtc2VydmljZS1hY2NvdW50OkR1eXNYS09BUDNucVd0dG41QzJLWTlHQ1NPRzFyOU5Q'

